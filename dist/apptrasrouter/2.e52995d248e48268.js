"use strict";(self.webpackChunkapptrasrouter=self.webpackChunkapptrasrouter||[]).push([[2],{4002:(Ot,D,l)=>{l.r(D),l.d(D,{TatulationModule:()=>g});var a=l(4006),p=l(6895),y=l(9299),r=l(671),d=l(5938),t=l(4650),k=l(7185),E=l(9829),B=l(5006),R=l(7121),T=l(8717),w=l(3683),_=l(4859),S=l(7392),V=l(5829);function j(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"option",22),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=e.$implicit;t.\u0275\u0275property("value",n.idlocation),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.location)}}function L(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"small",23),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.errorMessage("idlocation")," ")}}function N(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"option",22),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=e.$implicit;t.\u0275\u0275property("value",n.iddestinations),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.destinations)}}function z(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"small",23),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.errorMessage("iddestinations")," ")}}const F=function(i,e){return{"is-invalid":i,"is-valid":e}};var f=(()=>{return(i=f||(f={})).EDIT="edit",i.NEW="new",f;var i})();class v{constructor(e,n,o,s,m,c,O,It){this.fb=e,this.toastr=n,this.authSvc=o,this.placesSvc=s,this.placeSvc=m,this.tabulationSvc=c,this.data=O,this.dialogRef=It,this.actionTODO="",this.id=0,this.isValidnum=/(?=\w*[1-9])/,this.location=[],this.destinations=[]}ngOnInit(){this.TatulationForm(),this.List(),this.tatulationform.get("idcompany").setValue(this.idcompany)}List(){this.idcompany=this.authSvc.userValue.idcompany,this.data.route.idtabulation?(this.id=this.data.route.idtabulation,this.actionTODO=f.EDIT,this.tabulationSvc.GetIdTabulation(this.data.route.idtabulation).subscribe(e=>{this.tatulationform.patchValue({idlocation:e.idlocation,iddestinations:e.iddestinations,km:e.km,hours:e.hours,idcompany:e.idcompany}),this.CreateKm(e.idlocation,e.iddestinations),this.tatulationform.updateValueAndValidity()},e=>console.error(e))):this.actionTODO=f.NEW,this.placeSvc.GetLocation().subscribe(e=>{this.location=e},e=>console.log(e)),this.placesSvc.GetDestinations().subscribe(e=>{this.destinations=e},e=>console.log(e))}TatulationForm(){this.tatulationform=this.fb.group({idlocation:[,[a.kI.required]],iddestinations:[,[a.kI.required]],km:[,[a.kI.required,a.kI.min(1),a.kI.pattern(this.isValidnum)]],hours:[,[a.kI.required]],idcompany:[]}),this.locationform=this.fb.group({lat:[""],lng:[""]}),this.destinationsform=this.fb.group({lat:[""],lng:[""]})}save(){if(this.tatulationform.invalid)return;const e=this.tatulationform.value;this.actionTODO===f.NEW&&this.tabulationSvc.PostTabulation(e).subscribe(n=>{this.m=n,this.toastr.success(this.m.message,"Creado",{timeOut:3e3}),this.dialogRef.close(!0)},n=>console.error(n)),this.actionTODO===f.EDIT&&this.tabulationSvc.PutTabulation(e,this.id).subscribe(n=>{this.m=n,this.toastr.warning(this.m.message,"Actulizado",{timeOut:3e3}),this.dialogRef.close(!0)},n=>console.error(n))}CreateKm(e,n){this.placeSvc.GetIdLocation(e).subscribe(o=>{this.locationform.patchValue({lat:o.latitude,lng:o.longitude}),this.locationform.updateValueAndValidity()}),this.placesSvc.GetIdDestinations(n).subscribe(o=>{this.destinationsform.patchValue({lat:o.latitude,lng:o.longitude}),this.destinationsform.updateValueAndValidity()})}getDistance(e,n){const o=new google.maps.DistanceMatrixService;return new Promise((s,m)=>{o.getDistanceMatrix({origins:[new google.maps.LatLng(e.lat,e.lng)],destinations:[new google.maps.LatLng(n.lat,n.lng)],travelMode:google.maps.TravelMode.DRIVING},function(c,O){"OK"===O?s(c):m(c)})})}genear(){const e=this.tatulationform.value;this.CreateKm(e.idlocation,e.iddestinations),this.getDistance(this.locationform.value,this.destinationsform.value).then(n=>{console.log(n);const o=Math.round(n.rows[0].elements[0].distance.value/1e3),s=Math.round(n.rows[0].elements[0].duration.value/3600);this.tatulationform.patchValue({km:o,hours:s}),this.tatulationform.updateValueAndValidity(),this.locationform.reset(),this.destinationsform.reset()}).catch(n=>console.error(n))}isvalid(e){return this.tatulationform.get(e).invalid&&(this.tatulationform.get(e).dirty||this.tatulationform.get(e).touched)}errorMessage(e){const{errors:n}=this.tatulationform.get(e);let o=n?.minlength?.requiredLength;return n?{required:"el campo es requerido",minlength:`el Texto ingresado tiene menos de ${o} carateres`}[Object.keys(n).find(Boolean)||""]:""}}v.\u0275fac=function(e){return new(e||v)(t.\u0275\u0275directiveInject(a.qu),t.\u0275\u0275directiveInject(k._W),t.\u0275\u0275directiveInject(E.e),t.\u0275\u0275directiveInject(B.E),t.\u0275\u0275directiveInject(R.k),t.\u0275\u0275directiveInject(T.E),t.\u0275\u0275directiveInject(d.WI),t.\u0275\u0275directiveInject(d.so))},v.\u0275cmp=t.\u0275\u0275defineComponent({type:v,selectors:[["app-form"]],decls:49,vars:14,consts:[[1,"text-white","bg-primary"],[1,"fill-remaining-space"],["mat-icon-button","","mat-dialog-close",""],[1,""],[3,"formGroup"],[1,"form-group","row"],[1,"col-sm-5","col-form-label","fw-bold"],[1,"col-sm-7"],["placeholder","1","formControlName","idlocation","required","",1,"form-select","form-select-sm",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","form-text text-danger",4,"ngIf"],["formControlName","iddestinations","required","",1,"form-select","form-select-sm",3,"ngClass"],[1,"col-sm-4"],[1,"input-group","input-group-sm"],["type","number","readonly","","maxlength","10","placeholder","100.00","formControlName","km","required","",1,"form-control","form-select-sm","text-end"],[1,"input-group-text"],[1,"col-sm-3"],[1,"btn","btn-primary","btn-sm",2,"width","100%",3,"click"],["type","number","readonly","","maxlength","10","placeholder","100","formControlName","hours","required","",1,"form-control","form-select-sm","text-end"],["align","end"],[1,"btn","btn-success",3,"disabled","click"],[3,"value"],[1,"form-text","text-danger"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-toolbar",0)(1,"span"),t.\u0275\u0275text(2,"Ruta"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"span",1),t.\u0275\u0275elementStart(4,"button",2)(5,"mat-icon"),t.\u0275\u0275text(6,"close"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(7,"mat-dialog-content",3)(8,"form",4)(9,"div",5)(10,"label",6),t.\u0275\u0275text(11,"Localidad de Origen:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"div",7)(13,"select",8)(14,"option",9),t.\u0275\u0275text(15,"Seleccione"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,j,2,2,"option",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(17,L,2,1,"small",11),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(18,"div",5)(19,"label",6),t.\u0275\u0275text(20,"Localidad de Destino:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"div",7)(22,"select",12)(23,"option",9),t.\u0275\u0275text(24,"Seleccione"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(25,N,2,2,"option",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(26,z,2,1,"small",11),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(27,"div",5)(28,"label",6),t.\u0275\u0275text(29,"Kms de Distancia:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"div",13)(31,"div",14),t.\u0275\u0275element(32,"input",15),t.\u0275\u0275elementStart(33,"span",16),t.\u0275\u0275text(34,"Km"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(35,"div",17)(36,"div",18),t.\u0275\u0275listener("click",function(){return n.genear()}),t.\u0275\u0275text(37,"Generar"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(38,"div",5)(39,"label",6),t.\u0275\u0275text(40,"Horas de Recorrido:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"div",13)(42,"div",14),t.\u0275\u0275element(43,"input",19),t.\u0275\u0275elementStart(44,"span",16),t.\u0275\u0275text(45,"Horas"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(46,"mat-dialog-actions",20)(47,"button",21),t.\u0275\u0275listener("click",function(){return n.save()}),t.\u0275\u0275text(48,"Guardar"),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(8),t.\u0275\u0275property("formGroup",n.tatulationform),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(8,F,n.isvalid("idlocation"),n.tatulationform.get("idlocation").valid)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",n.location),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isvalid("idlocation")||!1),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(11,F,n.isvalid("iddestinations"),n.tatulationform.get("iddestinations").valid)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",n.destinations),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isvalid("iddestinations")||!1),t.\u0275\u0275advance(21),t.\u0275\u0275property("disabled",!n.tatulationform.valid))},dependencies:[p.mk,p.sg,p.O5,w.Ye,_.RK,S.Hw,d.ZT,d.xY,d.H8,V.oO,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u],styles:["label[_ngcontent-%COMP%]{color:#000}"]});var P=l(2340);function $(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"option",33),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=e.$implicit;t.\u0275\u0275property("value",n.idconcepts),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.concepts)}}function G(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"small",34),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.errorMessage("idconcepts")," ")}}function H(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"small",34),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.errorMessage("amount")," ")}}const M=function(i,e){return{"is-invalid":i,"is-valid":e}};function K(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"div")(1,"form",21)(2,"div",22)(3,"div",23)(4,"label",24),t.\u0275\u0275text(5,"Concepto:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",25)(7,"select",26)(8,"option",27),t.\u0275\u0275text(9,"seleccione uno"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,$,2,2,"option",28),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(11,G,2,1,"small",29),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(12,"div",22)(13,"div",23)(14,"label",24),t.\u0275\u0275text(15,"Monto:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",25)(17,"div",30)(18,"span",31),t.\u0275\u0275text(19,"$"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(20,"input",32),t.\u0275\u0275template(21,H,2,1,"small",29),t.\u0275\u0275elementEnd()()()()()()),2&i){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("formGroup",n.billform),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(6,M,n.isvalid("idconcepts"),n.billform.get("idconcepts").valid)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",n.concepts),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isvalid("idconcepts")||!1),t.\u0275\u0275advance(9),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(9,M,n.isvalid("amount"),n.billform.get("amount").valid)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isvalid("amount")||!1)}}function W(i,e){1&i&&t.\u0275\u0275element(0,"samp",35)}function A(i,e){if(1&i){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",36),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.cancel(s.new))}),t.\u0275\u0275element(1,"i",37),t.\u0275\u0275elementEnd()}}function Y(i,e){1&i&&(t.\u0275\u0275elementStart(0,"th",38),t.\u0275\u0275text(1,"Id"),t.\u0275\u0275elementEnd())}function J(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"td",39),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=e.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.idbill)}}function Q(i,e){1&i&&(t.\u0275\u0275elementStart(0,"th",38),t.\u0275\u0275text(1,"Documento"),t.\u0275\u0275elementEnd())}function Z(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"td",39),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=e.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.concepts)}}function q(i,e){1&i&&(t.\u0275\u0275elementStart(0,"th",38),t.\u0275\u0275text(1,"Monto"),t.\u0275\u0275elementEnd())}function X(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"td",39),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=e.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.amount)}}function U(i,e){1&i&&(t.\u0275\u0275elementStart(0,"th",38),t.\u0275\u0275text(1,"Actiones"),t.\u0275\u0275elementEnd())}function tt(i,e){if(1&i){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",39)(1,"div",40)(2,"button",41),t.\u0275\u0275listener("click",function(){const m=t.\u0275\u0275restoreView(n).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.Edit(m.idbill))}),t.\u0275\u0275element(3,"i",42),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",43),t.\u0275\u0275listener("click",function(){const m=t.\u0275\u0275restoreView(n).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.delete(m.idbill))}),t.\u0275\u0275element(5,"i",44),t.\u0275\u0275elementEnd()()()}}function et(i,e){1&i&&t.\u0275\u0275element(0,"tr",45)}function nt(i,e){1&i&&t.\u0275\u0275element(0,"tr",46)}const it=function(i,e){return{"fa-plus":i,"fa-check":e}};var u=(()=>{return(i=u||(u={})).EDIT="edit",i.NEW="new",u;var i})();class b{constructor(e,n,o,s,m,c){this.tabulationSvc=e,this.authSvc=n,this.fb=o,this.toastr=s,this.data=m,this.dialogRef=c,this.actionTODO="",this.displayedColumns=["idbill","concepts","amount","actions"],this.dataSource=new r.by,this.message="",this.new=!1,this.edit=!1,this.length=0,this.pageSize=10,this.pageSizeOptions=[],this.concepts=[],this.errms=!1}ngOnInit(){this.List(),this.BillForm()}List(){this.company=this.authSvc.userValue.idcompany,this.idtabulation=this.data.route.idtabulation,this.tabulationSvc.GetBillCompany(this.company,this.idtabulation).subscribe(e=>{this.dataSource.data=e,this.length=e.length,this.pageSizeOptions=[5,10,20,e.length]},e=>console.error(e)),this.tabulationSvc.GetConcepts().subscribe(e=>{this.concepts=e},e=>console.error(e))}BillForm(){this.billform=this.fb.group({idconcepts:[,[a.kI.required]],amount:["",[a.kI.required,a.kI.min(0)]],idtabulation:[,[a.kI.required]],idcompany:[,[a.kI.required]]}),this.form=this.fb.group({document:[""]})}onOpenModal(e){window.open(P.N.API_URL+e)}cancel(e){return this.actionTODO=u.NEW,this.new=!this.new,this.billform.reset(),this.new}Edit(e){this.actionTODO=u.EDIT,this.edit=!this.edit,this.new=!this.new,this.tabulationSvc.GetIdBill(e).subscribe(n=>{this.id=n.idbill,this.billform.patchValue({idconcepts:n.idconcepts,amount:n.amount,idtabulation:n.idtabulation,idcompany:n.idcompany}),this.billform.updateValueAndValidity()})}New(e){if(e){if(this.actionTODO===u.NEW){if(this.billform.get("idcompany").setValue(this.company),this.billform.get("idtabulation").setValue(this.idtabulation),!this.billform.valid)return this.toastr.warning("Sin Datos","No Hay Registro",{timeOut:3e3}),this.new;this.tabulationSvc.PostBill(this.billform.value).subscribe(o=>(this.m=o,this.toastr.success(this.m.message,"Creado",{timeOut:3e3}),this.List(),this.billform.reset(),this.new),o=>console.error(o))}if(this.actionTODO===u.EDIT){if(this.billform.get("idcompany").setValue(this.company),this.billform.get("idtabulation").setValue(this.idtabulation),!this.billform.valid)return this.toastr.warning("Sin Datos","No Hay Registro",{timeOut:3e3}),this.new;this.tabulationSvc.PutBill(this.billform.value,this.id).subscribe(o=>(this.m=o,this.toastr.warning(this.m.message,"Actualizado",{timeOut:3e3}),this.List(),this.billform.reset(),this.new),o=>console.error(o))}this.form.reset()}return this.actionTODO=u.NEW,this.edit=!this.edit,this.new=!this.new,this.new}isvalid(e){return this.billform.get(e).invalid&&(this.billform.get(e).dirty||this.billform.get(e).touched)}delete(e){window.confirm("Desea eliminar este Registro")&&this.tabulationSvc.DeleteBill(e).subscribe(n=>{this.toastr.error("Registro Eliminado","Eliminado",{timeOut:3e3}),this.List()})}errorMessage(e){const{errors:n}=this.billform.get(e);let o=n?.minlength?.requiredLength;return n?{required:"El campo es requerido",min:"El Valor no Puede ser menor a 100",minlength:`El valor ingresado es menor a ${o} carateres`}[Object.keys(n).find(Boolean)||""]:""}}b.\u0275fac=function(e){return new(e||b)(t.\u0275\u0275directiveInject(T.E),t.\u0275\u0275directiveInject(E.e),t.\u0275\u0275directiveInject(a.qu),t.\u0275\u0275directiveInject(k._W),t.\u0275\u0275directiveInject(d.WI),t.\u0275\u0275directiveInject(d.so))},b.\u0275cmp=t.\u0275\u0275defineComponent({type:b,selectors:[["app-bills"]],decls:33,vars:10,consts:[[1,"text-white","bg-primary"],[1,"fill-remaining-space"],["mat-icon-button","","mat-dialog-close",""],[2,"max-height","unset !important"],[1,"d-flex"],[1,"p-2","flex-grow-1"],[4,"ngIf"],[1,"p-2"],["type","button",1,"btn","btn-outline-success","btn-sm",3,"click"],[1,"fa-solid",3,"ngClass"],["style","margin: 5px;",4,"ngIf"],["type","button","class","btn btn-outline-danger btn-sm",3,"click",4,"ngIf"],["mat-table","",1,"table","table-striped","table-hover","text-center",3,"dataSource"],["matColumnDef","idbill"],["scope","col",4,"matHeaderCellDef"],["scope","row",4,"matCellDef"],["matColumnDef","concepts"],["matColumnDef","amount"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"row",3,"formGroup"],[1,"col-sm-6"],[1,"form-group","row"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-10"],["formControlName","idconcepts","required","",1,"form-select","form-select-sm",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"input-group","input-group-sm","mb-3"],[1,"input-group-text"],["type","number","formControlName","amount","placeholder","","slot","0.10",1,"form-control","form-control-sm",3,"ngClass"],[3,"value"],[1,"invalid-feedback"],[2,"margin","5px"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fa-solid","fa-x"],["scope","col"],["scope","row"],[1,""],[1,"spacer","btn","btn-outline-warning",3,"click"],[1,"fa-solid","fa-file-pen"],[1,"spacer","btn","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash-can"],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-toolbar",0)(1,"span"),t.\u0275\u0275text(2,"Costos"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"span",1),t.\u0275\u0275elementStart(4,"button",2)(5,"mat-icon"),t.\u0275\u0275text(6,"close"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(7,"mat-dialog-content",3)(8,"div",4)(9,"div",5),t.\u0275\u0275template(10,K,22,12,"div",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",7)(12,"button",8),t.\u0275\u0275listener("click",function(){return n.New(n.new)}),t.\u0275\u0275element(13,"i",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(14,W,1,0,"samp",10),t.\u0275\u0275template(15,A,2,0,"button",11),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(16,"table",12),t.\u0275\u0275elementContainerStart(17,13),t.\u0275\u0275template(18,Y,2,0,"th",14),t.\u0275\u0275template(19,J,2,1,"td",15),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(20,16),t.\u0275\u0275template(21,Q,2,0,"th",14),t.\u0275\u0275element(22,"th"),t.\u0275\u0275template(23,Z,2,1,"td",15),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(24,17),t.\u0275\u0275template(25,q,2,0,"th",14),t.\u0275\u0275element(26,"th"),t.\u0275\u0275template(27,X,2,1,"td",15),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(28,18),t.\u0275\u0275template(29,U,2,0,"th",14),t.\u0275\u0275template(30,tt,6,0,"td",15),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(31,et,1,0,"tr",19),t.\u0275\u0275template(32,nt,1,0,"tr",20),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(10),t.\u0275\u0275property("ngIf",n.new),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(7,it,!n.new,n.new)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.new),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.new),t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",n.dataSource),t.\u0275\u0275advance(15),t.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matRowDefColumns",n.displayedColumns))},dependencies:[p.mk,p.sg,p.O5,w.Ye,_.RK,S.Hw,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.XQ,r.Gk,d.ZT,d.xY,V.oO,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.Q7,a.sg,a.u],styles:[".header[_ngcontent-%COMP%]{font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;font-size:xx-large;font-weight:700}.spacer[_ngcontent-%COMP%]{border:none}label[_ngcontent-%COMP%]{color:#000}"]});class C{}C.\u0275fac=function(e){return new(e||C)},C.\u0275cmp=t.\u0275\u0275defineComponent({type:C,selectors:[["app-freight"]],decls:7,vars:0,consts:[[1,"text-white","bg-primary"],[1,"fill-remaining-space"],["mat-icon-button","","mat-dialog-close",""]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-toolbar",0)(1,"span"),t.\u0275\u0275text(2,"Fletes"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"span",1),t.\u0275\u0275elementStart(4,"button",2)(5,"mat-icon"),t.\u0275\u0275text(6,"close"),t.\u0275\u0275elementEnd()()())},dependencies:[w.Ye,_.RK,S.Hw,d.ZT]});var I=l(8255),ot=l(7974);const at=["scheduledOrdersPaginator"];function lt(i,e){1&i&&(t.\u0275\u0275elementStart(0,"th",40),t.\u0275\u0275text(1,"Id"),t.\u0275\u0275elementEnd())}function rt(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"td",41),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=e.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.idtabulation)}}function st(i,e){1&i&&(t.\u0275\u0275elementStart(0,"th",40),t.\u0275\u0275text(1,"Origen"),t.\u0275\u0275elementEnd())}function mt(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"td",41),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=e.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.location)}}function ct(i,e){1&i&&(t.\u0275\u0275elementStart(0,"th",40),t.\u0275\u0275text(1,"Destio"),t.\u0275\u0275elementEnd())}function dt(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"td",41),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=e.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.destinations)}}function ut(i,e){1&i&&(t.\u0275\u0275elementStart(0,"th",40),t.\u0275\u0275text(1,"km"),t.\u0275\u0275elementEnd())}function pt(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"td",41),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=e.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.km)}}function ft(i,e){1&i&&(t.\u0275\u0275elementStart(0,"th",40),t.\u0275\u0275text(1,"Horas"),t.\u0275\u0275elementEnd())}function ht(i,e){if(1&i&&(t.\u0275\u0275elementStart(0,"td",41),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=e.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.hours)}}function gt(i,e){1&i&&(t.\u0275\u0275elementStart(0,"th",40),t.\u0275\u0275element(1,"i",42),t.\u0275\u0275elementEnd())}function vt(i,e){if(1&i){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",41)(1,"button",43),t.\u0275\u0275listener("click",function(){const m=t.\u0275\u0275restoreView(n).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.onOpenModal(m))}),t.\u0275\u0275element(2,"i",42),t.\u0275\u0275elementEnd()()}}function bt(i,e){1&i&&(t.\u0275\u0275elementStart(0,"th",44),t.\u0275\u0275text(1,"\xa0"),t.\u0275\u0275elementEnd())}function Ct(i,e){if(1&i){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",45)(1,"button",46)(2,"mat-icon"),t.\u0275\u0275text(3,"more_vert"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"mat-menu",47,48)(6,"button",49),t.\u0275\u0275listener("click",function(){const m=t.\u0275\u0275restoreView(n).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.onOpenModalFreight(m))}),t.\u0275\u0275elementStart(7,"mat-icon"),t.\u0275\u0275text(8,"add"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"span"),t.\u0275\u0275text(10,"Tarifas de Fletes"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"button",49),t.\u0275\u0275listener("click",function(){const m=t.\u0275\u0275restoreView(n).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.onOpenModalBills(m))}),t.\u0275\u0275elementStart(12,"mat-icon"),t.\u0275\u0275text(13,"add"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"span"),t.\u0275\u0275text(15,"Tarifas de Costos"),t.\u0275\u0275elementEnd()()()()}if(2&i){const n=t.\u0275\u0275reference(5);t.\u0275\u0275advance(1),t.\u0275\u0275property("matMenuTriggerFor",n)}}function xt(i,e){1&i&&t.\u0275\u0275element(0,"tr",50)}function _t(i,e){1&i&&t.\u0275\u0275element(0,"tr",51)}function St(i,e){1&i&&(t.\u0275\u0275elementStart(0,"tr",52)(1,"td",53),t.\u0275\u0275text(2,"No hay Datos"),t.\u0275\u0275elementEnd()())}const yt=function(){return["/displaypanel"]},Et=function(){return["/displaypanel/route"]};class x{constructor(e,n,o){this.dialog=e,this.tabulationSvc=n,this.authSvc=o,this.data=[],this.actionTODO="",this.isedit=0,this.message="",this.displayedColumns=["idtabulation","location","destinations","km","hours","actions","cos"],this.dataSource=new r.by,this.length=0,this.pageSize=10,this.pageSizeOptions=[],this.numRegex=/^-?\d*[.,]?\d{0,2}$/,this.m=[],this.ed=!1,this.cl=!1}set paginator(e){e&&(this.dataSource.paginator=e)}ngOnInit(){this.List()}List(){this.tabulationSvc.GetTabulationCompany(this.authSvc.userValue.idcompany).subscribe(n=>{this.dataSource.data=n,this.length=n.length,this.pageSizeOptions=[5,10,20,n.length]},n=>console.error(n))}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}onOpenModal(e={}){this.dialog.open(v,{height:"350px",width:"600px",hasBackdrop:!0,disableClose:!0,data:{title:"Ruta",route:e}}).afterClosed().subscribe(o=>{this.List()},o=>console.error(o))}onOpenModalBills(e={}){this.dialog.open(b,{maxHeight:"100hv",maxWidth:"100hv",height:"95%",width:"95%",hasBackdrop:!0,disableClose:!0,data:{title:"Ruta",route:e}}).afterClosed().subscribe(o=>{},o=>console.error(o))}onOpenModalFreight(e={}){this.dialog.open(C,{height:"350px",width:"600px",hasBackdrop:!0,disableClose:!0,data:{title:"Ruta",route:e}}).afterClosed().subscribe(o=>{},o=>console.error(o))}}x.\u0275fac=function(e){return new(e||x)(t.\u0275\u0275directiveInject(d.uw),t.\u0275\u0275directiveInject(T.E),t.\u0275\u0275directiveInject(E.e))},x.\u0275cmp=t.\u0275\u0275defineComponent({type:x,selectors:[["app-tatulation"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(at,5),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.paginator=o.first)}},decls:61,vars:10,consts:[[1,"container-fluid","body"],[1,"mt-4"],["aria-label","breadcrume"],["aria-label","breadcrumb",1,"breadcrumb",2,"--bs-breadcrumb-divider","url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E\")"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"fa-solid","fa-house"],["aria-current","page",1,"breadcrumb-item","active"],[1,"form-group","d-flex","justify-content-between"],[1,"fw-bold"],[1,"btn","btn-lg","btn-success","btn-sm",3,"click"],[1,"fa-solid","fa-plus"],[2,"margin-left","10px"],[1,"mt-1"],[1,"card"],[1,"card-body"],[1,"d-flex","justify-content-between"],[1,"mb-1","row","text-black"],[1,"spacer1"],[1,"form-group","row"],[1,"col-sm-4","col-form-label","fw-bold"],[1,"col-sm-8"],["type","text","placeholder","Buscar",1,"form-control","form-control-sm",3,"keyup"],["mat-table","",1,"table","table-sm","text-center","table-striped","table-hover",3,"dataSource"],["matColumnDef","idtabulation"],["scope","col",4,"matHeaderCellDef"],["scope","row",4,"matCellDef"],["matColumnDef","location"],["matColumnDef","destinations"],["matColumnDef","km"],["matColumnDef","hours"],["matColumnDef","actions"],["matColumnDef","cos","stickyEnd",""],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["scheduledOrdersPaginator",""],["scope","col"],["scope","row"],[1,"fa-solid","fa-left-right"],["type","button",1,"btn","btn-outline-dark","btn-sm","spacer",3,"click"],["mat-header-cell","","aria-label","row actions"],["mat-cell",""],["mat-icon-button","",3,"matMenuTriggerFor"],["xPosition","before"],["beforeMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","8",1,"mat-cell"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"div",1),t.\u0275\u0275elementStart(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),t.\u0275\u0275element(6,"i",6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"li",4)(8,"a",5),t.\u0275\u0275text(9,"Rutas"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"li",7),t.\u0275\u0275text(11,"Viajes"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(12,"div",8)(13,"h4",9),t.\u0275\u0275text(14,"Matrix de Costos"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"button",10),t.\u0275\u0275listener("click",function(){return n.onOpenModal()}),t.\u0275\u0275element(16,"i",11)(17,"span",12),t.\u0275\u0275text(18," Nuevo Dato "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(19,"div",13),t.\u0275\u0275elementStart(20,"div",14)(21,"div",15)(22,"div",16),t.\u0275\u0275element(23,"div",17)(24,"div",18),t.\u0275\u0275elementStart(25,"div",19)(26,"label",20),t.\u0275\u0275text(27,"Buscar:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(28,"div",21)(29,"input",22),t.\u0275\u0275listener("keyup",function(s){return n.applyFilter(s)}),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(30,"table",23),t.\u0275\u0275elementContainerStart(31,24),t.\u0275\u0275template(32,lt,2,0,"th",25),t.\u0275\u0275template(33,rt,2,1,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(34,27),t.\u0275\u0275template(35,st,2,0,"th",25),t.\u0275\u0275element(36,"th"),t.\u0275\u0275template(37,mt,2,1,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(38,28),t.\u0275\u0275template(39,ct,2,0,"th",25),t.\u0275\u0275element(40,"th"),t.\u0275\u0275template(41,dt,2,1,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(42,29),t.\u0275\u0275template(43,ut,2,0,"th",25),t.\u0275\u0275element(44,"th"),t.\u0275\u0275template(45,pt,2,1,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(46,30),t.\u0275\u0275template(47,ft,2,0,"th",25),t.\u0275\u0275element(48,"th"),t.\u0275\u0275template(49,ht,2,1,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(50,31),t.\u0275\u0275template(51,gt,2,0,"th",25),t.\u0275\u0275template(52,vt,3,0,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(53,32),t.\u0275\u0275template(54,bt,2,0,"th",33),t.\u0275\u0275template(55,Ct,16,1,"td",34),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(56,xt,1,0,"tr",35),t.\u0275\u0275template(57,_t,1,0,"tr",36),t.\u0275\u0275template(58,St,3,0,"tr",37),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(59,"mat-paginator",38,39),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275property("routerLink",t.\u0275\u0275pureFunction0(8,yt)),t.\u0275\u0275advance(3),t.\u0275\u0275property("routerLink",t.\u0275\u0275pureFunction0(9,Et)),t.\u0275\u0275advance(22),t.\u0275\u0275property("dataSource",n.dataSource),t.\u0275\u0275advance(26),t.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matRowDefColumns",n.displayedColumns),t.\u0275\u0275advance(2),t.\u0275\u0275property("length",n.length)("pageSize",5)("pageSizeOptions",n.pageSizeOptions))},dependencies:[y.rH,_.RK,I.VK,I.OP,I.p6,S.Hw,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,r.Ee,ot.NW],styles:[".spacer[_ngcontent-%COMP%]{border:none}.spacer2[_ngcontent-%COMP%]{margin:10px}.spacer1[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:40%}table[_ngcontent-%COMP%]{width:100%}.spacer1[_ngcontent-%COMP%]{flex:1 1 auto}"]});const Tt=[{path:"",component:x}];class h{}h.\u0275fac=function(e){return new(e||h)},h.\u0275mod=t.\u0275\u0275defineNgModule({type:h}),h.\u0275inj=t.\u0275\u0275defineInjector({imports:[y.Bz.forChild(Tt),y.Bz]});var wt=l(4738);class g{}g.\u0275fac=function(e){return new(e||g)},g.\u0275mod=t.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=t.\u0275\u0275defineInjector({imports:[p.ez,h,wt.q,a.UX]})}}]);