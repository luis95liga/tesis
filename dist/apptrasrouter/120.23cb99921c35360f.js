"use strict";(self.webpackChunkapptrasrouter=self.webpackChunkapptrasrouter||[]).push([[120],{120:(Xe,k,s)=>{s.r(k),s.d(k,{CompanyModule:()=>y});var f=s(6895),M=s(4738),E=s(9299),O=s(5861),a=s(4006),c=s(671),_=s(5938),e=s(4650),w=s(3077),T=s(7185),F=s(3683),N=s(4859),I=s(5829);function z(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("bank_name")," ")}}function L(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("account_number")," ")}}function R(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",35),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("default")," ")}}const V=function(o,n){return{"is-invalid":o,"is-valid":n}};function j(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"div",6)(1,"div",26)(2,"div",27)(3,"label",28),e.\u0275\u0275text(4,"Nombre del Banco"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"input",29),e.\u0275\u0275template(6,z,2,1,"small",30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",26)(8,"div",27)(9,"label",28),e.\u0275\u0275text(10,"Numero de Cuenta"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",31),e.\u0275\u0275template(12,L,2,1,"small",30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",26),e.\u0275\u0275element(14,"br")(15,"br")(16,"br"),e.\u0275\u0275elementStart(17,"div",32),e.\u0275\u0275element(18,"input",33),e.\u0275\u0275elementStart(19,"label",34),e.\u0275\u0275text(20," Defecto "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,R,2,1,"small",30),e.\u0275\u0275elementEnd()()()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,V,t.isvalid("bank_name"),t.acountform.get("bank_name").valid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("bank_name")||!1),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(8,V,t.isvalid("account_number"),t.acountform.get("account_number").valid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("account_number")||!1),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.isvalid("default")||!1)}}function P(o,n){1&o&&e.\u0275\u0275element(0,"samp",36)}function B(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.cancel(l.new))}),e.\u0275\u0275element(1,"i",38),e.\u0275\u0275elementEnd()}}function $(o,n){1&o&&(e.\u0275\u0275elementStart(0,"th",39),e.\u0275\u0275text(1,"Id"),e.\u0275\u0275elementEnd())}function W(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td",40),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.idbank_account)}}function q(o,n){1&o&&(e.\u0275\u0275elementStart(0,"th",39),e.\u0275\u0275text(1,"Nombre de Banco"),e.\u0275\u0275elementEnd())}function G(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td",40),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.bank_name)}}function J(o,n){1&o&&(e.\u0275\u0275elementStart(0,"th",39),e.\u0275\u0275text(1,"Numero de Cuenta"),e.\u0275\u0275elementEnd())}function H(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td",40),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.account_number)}}function Y(o,n){1&o&&(e.\u0275\u0275elementStart(0,"th",39),e.\u0275\u0275text(1,"Defecto"),e.\u0275\u0275elementEnd())}function Q(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td",40),e.\u0275\u0275element(1,"input",41),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("checked",t.default)}}function U(o,n){1&o&&(e.\u0275\u0275elementStart(0,"th",39),e.\u0275\u0275text(1,"Actiones"),e.\u0275\u0275elementEnd())}function Z(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",40)(1,"div",42)(2,"button",43),e.\u0275\u0275listener("click",function(){const m=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.Edit(m.idbank_account))}),e.\u0275\u0275element(3,"i",44),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",45),e.\u0275\u0275listener("click",function(){const m=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.delete(m.idbank_account))}),e.\u0275\u0275element(5,"i",46),e.\u0275\u0275elementEnd()()()}}function K(o,n){1&o&&e.\u0275\u0275element(0,"tr",47)}function X(o,n){1&o&&e.\u0275\u0275element(0,"tr",48)}const ee=function(o,n){return{"fa-plus":o,"fa-check":n}};var h=(()=>{return(o=h||(h={})).EDIT="edit",o.NEW="new",h;var o})();class g{constructor(n,t,i,l){this.companySvc=n,this.fb=t,this.toastr=i,this.data=l,this.actionTODO="",this.displayedColumns=["idbank_account","bank_name","account_number","default","actions"],this.dataSource=new c.by,this.message="",this.new=!1,this.edit=!1,this.length=0,this.pageSize=10,this.pageSizeOptions=[]}ngOnInit(){this.List(),this.AcountForm()}List(){this.company=this.data.company.idcompany,this.idcompany=this.company.idcompany,this.companySvc.getCompanyAccount(this.company).subscribe(n=>{this.dataSource.data=n,this.length=n.length,this.pageSizeOptions=[5,10,20,n.length]},n=>console.error(n))}AcountForm(){this.acountform=this.fb.group({bank_name:["",[a.kI.required,a.kI.minLength(5)]],account_number:["",[a.kI.required,a.kI.minLength(10)]],default:[!1],idcompany:[]})}cancel(n){return this.actionTODO=h.NEW,this.new=!this.new,this.acountform.reset(),this.new}Edit(n){this.actionTODO=h.EDIT,this.edit=!this.edit,this.new=!this.new,this.companySvc.GetIdBankAccount(n).subscribe(t=>{this.id=t.idbank_account,this.acountform.patchValue({bank_name:t.bank_name,account_number:t.account_number,default:t.default,idcompany:t.idcompany}),this.acountform.updateValueAndValidity()})}New(n){if(n){if(this.actionTODO===h.NEW){if(!this.acountform.valid)return this.toastr.warning("Sin Datos","No Hay Registro",{timeOut:3e3}),this.new;this.acountform.patchValue({idcompany:this.company}),this.acountform.updateValueAndValidity(),this.companySvc.PostBankAccount(this.acountform.value).subscribe(i=>(this.m=i,this.toastr.success(this.m.message,"Creado",{timeOut:3e3}),this.List(),this.acountform.reset(),this.new))}this.actionTODO===h.EDIT&&this.companySvc.PutBankAccount(this.acountform.value,this.id).subscribe(i=>(this.m=i,this.toastr.warning(this.m.message,"actulizado",{timeOut:3e3}),this.List(),this.acountform.reset(),this.edit=!this.edit,this.actionTODO=h.NEW,this.new))}return this.actionTODO=h.NEW,this.edit=!this.edit,this.new=!this.new,this.new}isvalid(n){return this.acountform.get(n).invalid&&(this.acountform.get(n).dirty||this.acountform.get(n).touched)}delete(n){window.confirm("Desea eliminar este Registro")&&this.companySvc.DeleteBankAccount(n).subscribe(t=>{this.toastr.error("Registro Eliminado","Eliminado",{timeOut:3e3}),this.List()})}errorMessage(n){const{errors:t}=this.acountform.get(n);let i=t?.minlength?.requiredLength;return t?{required:"el campo es requerido",minlength:`el Texto ingresado tiene menos de ${i} carateres`}[Object.keys(t).find(Boolean)||""]:""}}g.\u0275fac=function(n){return new(n||g)(e.\u0275\u0275directiveInject(w.J),e.\u0275\u0275directiveInject(a.qu),e.\u0275\u0275directiveInject(T._W),e.\u0275\u0275directiveInject(_.WI))},g.\u0275cmp=e.\u0275\u0275defineComponent({type:g,selectors:[["app-accounts"]],decls:40,vars:12,consts:[[1,"text-white","bg-primary"],[1,"fill-remaining-space"],["mat-icon-button","",3,"mat-dialog-close"],[1,"fa-solid","fa-xmark"],[1,"d-flex"],[1,"p-2","flex-grow-1"],[1,"row"],[1,"col-10"],[3,"formGroup"],["class","row",4,"ngIf"],[1,"col-2"],[1,"p-2"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"fa-solid",3,"ngClass"],["style","margin: 5px;",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],["mat-table","",1,"table","table-striped","table-hover",3,"dataSource"],["matColumnDef","idbank_account"],["scope","col",4,"matHeaderCellDef"],["scope","row",4,"matCellDef"],["matColumnDef","bank_name"],["matColumnDef","account_number"],["matColumnDef","default"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"col"],[1,"form-group"],[1,"col-form-label","col-form-label-sm","mt-4"],["type","text","formControlName","bank_name","placeholder","Nombre del Banco",1,"form-control","form-control-sm",3,"ngClass"],["class","form-text text-danger",4,"ngIf"],["type","text","formControlName","account_number","placeholder","20222222222",1,"form-control","form-control-sm",3,"ngClass"],[1,"form-check"],["type","checkbox","id","flexCheckChecked","checked","false","formControlName","default",1,"form-check-input"],["for","flexCheckChecked",1,"form-check-label"],[1,"form-text","text-danger"],[2,"margin","5px"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"fa-solid","fa-x"],["scope","col"],["scope","row"],["type","checkbox","disabled","",1,"form-check-input",3,"checked"],[1,""],[1,"spacer","btn","btn-outline-warning",3,"click"],[1,"fa-solid","fa-file-pen"],[1,"spacer","btn","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash-can"],["mat-header-row",""],["mat-row",""]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"mat-toolbar",0)(1,"span"),e.\u0275\u0275text(2,"Cuentas Bancarias"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",1),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275element(5,"i",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"mat-dialog-content")(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"form",8),e.\u0275\u0275template(12,j,22,11,"div",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(13,"div",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",11)(15,"button",12),e.\u0275\u0275listener("click",function(){return t.New(t.new)}),e.\u0275\u0275element(16,"i",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,P,1,0,"samp",14),e.\u0275\u0275template(18,B,2,0,"button",15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div")(20,"table",16),e.\u0275\u0275elementContainerStart(21,17),e.\u0275\u0275template(22,$,2,0,"th",18),e.\u0275\u0275template(23,W,2,1,"td",19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(24,20),e.\u0275\u0275template(25,q,2,0,"th",18),e.\u0275\u0275element(26,"th"),e.\u0275\u0275template(27,G,2,1,"td",19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(28,21),e.\u0275\u0275template(29,J,2,0,"th",18),e.\u0275\u0275element(30,"th"),e.\u0275\u0275template(31,H,2,1,"td",19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(32,22),e.\u0275\u0275template(33,Y,2,0,"th",18),e.\u0275\u0275template(34,Q,2,1,"td",19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(35,23),e.\u0275\u0275template(36,U,2,0,"th",18),e.\u0275\u0275template(37,Z,6,0,"td",19),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(38,K,1,0,"tr",24),e.\u0275\u0275template(39,X,1,0,"tr",25),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("mat-dialog-close",!0),e.\u0275\u0275advance(7),e.\u0275\u0275property("formGroup",t.acountform),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.new),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(9,ee,!t.new,t.new)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.new),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.new),e.\u0275\u0275advance(2),e.\u0275\u0275property("dataSource",t.dataSource),e.\u0275\u0275advance(18),e.\u0275\u0275property("matHeaderRowDef",t.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",t.displayedColumns))},dependencies:[f.mk,f.O5,F.Ye,N.RK,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.XQ,c.Gk,_.ZT,_.xY,I.oO,a._Y,a.Fj,a.Wl,a.JJ,a.JL,a.sg,a.u],styles:[".header[_ngcontent-%COMP%]{font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;font-size:xx-large;font-weight:700}.spacer[_ngcontent-%COMP%]{border:none}button[_ngcontent-%COMP%]{margin-right:8px}"]});var A=s(2340),te=s(7392);function ne(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("issue_date")," ")}}function oe(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("cost_procedure")," ")}}function ae(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("expiration_date")," ")}}function ie(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",39),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t.iddocument_type),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function le(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("idtype_document")," ")}}function re(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.message," ")}}function me(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",38),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("observations")," ")}}const b=function(o,n){return{"is-invalid":o,"is-valid":n}};function se(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"form",23)(2,"div",24)(3,"div",25)(4,"label",26),e.\u0275\u0275text(5,"Fecha de Expedici\xf3n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"input",27),e.\u0275\u0275template(7,ne,2,1,"small",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",25)(9,"label",26),e.\u0275\u0275text(10,"Costo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",29)(12,"span",30),e.\u0275\u0275text(13,"$"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"input",31),e.\u0275\u0275template(15,oe,2,1,"small",28),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",24)(17,"div",25)(18,"label",26),e.\u0275\u0275text(19,"Fecha de Expiraci\xf3n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"input",32),e.\u0275\u0275template(21,ae,2,1,"small",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",25)(23,"label",26),e.\u0275\u0275text(24,"Tipo de Documento"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"select",33)(26,"option",34),e.\u0275\u0275text(27,"seleccione uno"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(28,ie,2,2,"option",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,le,2,1,"small",28),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",24)(31,"div",25)(32,"label",26),e.\u0275\u0275text(33,"Archivo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"input",36),e.\u0275\u0275listener("change",function(l){e.\u0275\u0275restoreView(t);const m=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(m.onChange(l))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(35,re,2,1,"small",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",25)(37,"label",26),e.\u0275\u0275text(38,"Observaci\xf3n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"textarea",37),e.\u0275\u0275template(40,me,2,1,"small",28),e.\u0275\u0275elementEnd()()()()}if(2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",t.documentform),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(13,b,t.isvalid("issue_date"),t.documentform.get("issue_date").valid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("issue_date")||!1),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(16,b,t.isvalid("cost_procedure"),t.documentform.get("cost_procedure").valid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("cost_procedure")||!1),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(19,b,t.isvalid("expiration_date"),t.documentform.get("expiration_date").valid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("expiration_date")||!1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(22,b,t.isvalid("idtype_document"),t.documentform.get("idtype_document").valid)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.documentstype),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("idtype_document")||!1),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.errms||!1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(25,b,t.isvalid("observations"),t.documentform.get("observations").valid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("observations")||!1)}}function ce(o,n){1&o&&e.\u0275\u0275element(0,"samp",40)}function de(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.cancel(l.new))}),e.\u0275\u0275element(1,"i",42),e.\u0275\u0275elementEnd()}}function pe(o,n){1&o&&(e.\u0275\u0275elementStart(0,"th",43),e.\u0275\u0275text(1,"Id"),e.\u0275\u0275elementEnd())}function ue(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.iddocument)}}function fe(o,n){1&o&&(e.\u0275\u0275elementStart(0,"th",43),e.\u0275\u0275text(1,"Documento"),e.\u0275\u0275elementEnd())}function he(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.type_document)}}function _e(o,n){1&o&&(e.\u0275\u0275elementStart(0,"th",43),e.\u0275\u0275text(1,"Url"),e.\u0275\u0275elementEnd())}function ve(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",47),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext().$implicit,m=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(m.onOpenModal(l.attachment))}),e.\u0275\u0275element(2,"i",48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}}function ye(o,n){1&o&&(e.\u0275\u0275elementStart(0,"button",49),e.\u0275\u0275element(1,"i",48),e.\u0275\u0275elementEnd())}function ge(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td",44),e.\u0275\u0275template(1,ve,3,0,"ng-container",45),e.\u0275\u0275template(2,ye,2,0,"ng-template",null,46,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit,i=e.\u0275\u0275reference(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attachment.length>0)("ngIfElse",i)}}function be(o,n){1&o&&(e.\u0275\u0275elementStart(0,"th",43),e.\u0275\u0275text(1,"Fecha de Expedici\xf3n"),e.\u0275\u0275elementEnd())}function Ce(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.issue_date)}}function xe(o,n){1&o&&(e.\u0275\u0275elementStart(0,"th",43),e.\u0275\u0275text(1,"Fecha de Expiraci\xf3n"),e.\u0275\u0275elementEnd())}function Ee(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.expiration_date)}}function Se(o,n){1&o&&(e.\u0275\u0275elementStart(0,"th",43),e.\u0275\u0275text(1,"Costo"),e.\u0275\u0275elementEnd())}function we(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"td",44),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.cost_procedure)}}function Te(o,n){1&o&&(e.\u0275\u0275elementStart(0,"th",43),e.\u0275\u0275text(1,"Actiones"),e.\u0275\u0275elementEnd())}function Ie(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",44)(1,"div",50)(2,"button",51),e.\u0275\u0275listener("click",function(){const m=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.Edit(m.iddocument))}),e.\u0275\u0275element(3,"i",52),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",53),e.\u0275\u0275listener("click",function(){const m=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.delete(m.iddocument))}),e.\u0275\u0275element(5,"i",54),e.\u0275\u0275elementEnd()()()}}function De(o,n){1&o&&e.\u0275\u0275element(0,"tr",55)}function ke(o,n){1&o&&e.\u0275\u0275element(0,"tr",56)}const Oe=function(o,n){return{"fa-plus":o,"fa-check":n}};var p=(()=>{return(o=p||(p={})).EDIT="edit",o.NEW="new",p;var o})();class C{constructor(n,t,i,l){this.companySvc=n,this.fb=t,this.toastr=i,this.data=l,this.actionTODO="",this.displayedColumns=["iddocument","type_document","attachment","issue_date","expiration_date","cost_procedure","actions"],this.dataSource=new c.by,this.message="",this.new=!1,this.edit=!1,this.length=0,this.pageSize=10,this.pageSizeOptions=[],this.documentstype=[],this.errms=!1}ngOnInit(){this.List(),this.DocumentForm()}List(){this.company=this.data.company.idcompany,this.idcompany=this.company.idcompany,this.companySvc.GetDocumentCompany(this.company).subscribe(n=>{this.dataSource.data=n,this.length=n.length,this.pageSizeOptions=[5,10,20,n.length]},n=>console.error(n)),this.companySvc.GetTypeDocuments().subscribe(n=>{this.documentstype=n},n=>console.error(n))}DocumentForm(){this.documentform=this.fb.group({issue_date:["",[a.kI.required,a.kI.minLength(5)]],expiration_date:["",[a.kI.required,a.kI.minLength(5)]],attachment:[],cost_procedure:["",[a.kI.required,a.kI.min(100)]],observations:["",[a.kI.required,a.kI.minLength(5)]],idtype_document:[,[a.kI.required]],idcompany:[]}),this.form=this.fb.group({document:[""]})}onOpenModal(n){window.open(A.N.API_URL+n)}cancel(n){return this.actionTODO=p.NEW,this.new=!this.new,this.documentform.reset(),this.new}onChange(n){if(n.target.files.length>0)if(n.target.files[0].size>5048576)this.message="El documento excede el tama\xf1o m\xe1ximo de 5 MB";else{const t=n.target.files[0];this.form.get("document").setValue(t),this.message="",this.errms=!1}}Edit(n){this.actionTODO=p.EDIT,this.edit=!this.edit,this.new=!this.new,this.companySvc.GetIdDocument(n).subscribe(t=>{console.log(t),this.id=t.iddocument,this.documentform.patchValue({issue_date:t.issue_date,expiration_date:t.expiration_date,cost_procedure:t.cost_procedure,observations:t.observations,idtype_document:t.idtype_document,idcompany:t.idcompany}),this.documentform.updateValueAndValidity()})}New(n){if(n){if(this.actionTODO===p.NEW){if(!this.documentform.valid)return this.toastr.warning("Sin Datos","No Hay Registro",{timeOut:3e3}),this.new;if(this.form.get("document").value){const t=new FormData;t.append("issue_date",this.documentform.value.issue_date),t.append("expiration_date",this.documentform.value.expiration_date),t.append("attachment",this.form.get("document").value),t.append("cost_procedure",this.documentform.value.cost_procedure),t.append("observations",this.documentform.value.observations),t.append("idtype_document",this.documentform.value.idtype_document),t.append("idcompany",this.company),this.companySvc.PostDocument(t).subscribe(i=>(this.m=i,this.toastr.success(this.m.message,"Creado",{timeOut:3e3}),this.List(),this.documentform.reset(),this.new),i=>console.log(i))}else this.documentform.patchValue({idcompany:this.company}),this.documentform.updateValueAndValidity(),this.companySvc.PostDocument(this.documentform.value).subscribe(i=>(this.m=i,this.toastr.success(this.m.message,"Creado",{timeOut:3e3}),this.List(),this.documentform.reset(),this.new),i=>console.log(i))}if(this.actionTODO===p.EDIT){if(!this.documentform.valid)return this.toastr.warning("Sin Datos","No Hay Registro",{timeOut:3e3}),this.new;if(this.form.get("document").value){const t=new FormData;t.append("issue_date",this.documentform.value.issue_date),t.append("expiration_date",this.documentform.value.expiration_date),t.append("attachment",this.form.get("document").value),t.append("cost_procedure",this.documentform.value.cost_procedure),t.append("observations",this.documentform.value.observations),t.append("idtype_document",this.documentform.value.idtype_document),t.append("idcompany",this.company),this.companySvc.PutDocument(t,this.id).subscribe(i=>(this.m=i,this.toastr.warning(this.m.message,"actulizado",{timeOut:3e3}),this.List(),this.documentform.reset(),this.edit=!this.edit,this.actionTODO=p.NEW,this.new),i=>console.error(i))}else this.documentform.patchValue({idcompany:this.company}),this.documentform.updateValueAndValidity(),this.companySvc.PutDocument(this.documentform.value,this.id).subscribe(i=>(this.m=i,this.toastr.warning(this.m.message,"actulizado",{timeOut:3e3}),this.List(),this.documentform.reset(),this.edit=!this.edit,this.actionTODO=p.NEW,this.new),i=>console.error(i))}this.form.reset()}return this.actionTODO=p.NEW,this.edit=!this.edit,this.new=!this.new,this.new}isvalid(n){return this.documentform.get(n).invalid&&(this.documentform.get(n).dirty||this.documentform.get(n).touched)}delete(n){window.confirm("Desea eliminar este Registro")&&this.companySvc.DeleteDocument(n).subscribe(t=>{this.toastr.error("Registro Eliminado","Eliminado",{timeOut:3e3}),this.List()})}errorMessage(n){const{errors:t}=this.documentform.get(n);let i=t?.minlength?.requiredLength;return t?{required:"El campo es requerido",min:"El Valor no Puede ser menor a 100",minlength:`El valor ingresado es menor a ${i} carateres`}[Object.keys(t).find(Boolean)||""]:""}}C.\u0275fac=function(n){return new(n||C)(e.\u0275\u0275directiveInject(w.J),e.\u0275\u0275directiveInject(a.qu),e.\u0275\u0275directiveInject(T._W),e.\u0275\u0275directiveInject(_.WI))},C.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["app-documents"]],decls:45,vars:11,consts:[[1,"text-white","bg-primary"],[1,"fill-remaining-space"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"mat-dialog-close"],[1,"d-flex"],[1,"p-2","flex-grow-1"],[4,"ngIf"],[1,"p-2"],["type","button",1,"btn","btn-outline-success","btn-sm",3,"click"],[1,"fa-solid",3,"ngClass"],["style","margin: 5px;",4,"ngIf"],["type","button","class","btn btn-outline-danger btn-sm",3,"click",4,"ngIf"],["mat-table","",1,"table","table-striped","table-hover","text-center",3,"dataSource"],["matColumnDef","iddocument"],["scope","col",4,"matHeaderCellDef"],["scope","row",4,"matCellDef"],["matColumnDef","type_document"],["matColumnDef","attachment"],["matColumnDef","issue_date"],["matColumnDef","expiration_date"],["matColumnDef","cost_procedure"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"row",3,"formGroup"],[1,"col-sm-4"],[1,"form-group"],[1,"col-form-label","col-form-label-sm"],["type","date","formControlName","issue_date",1,"form-control","form-control-sm",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"input-group","input-group-sm","mb-3"],[1,"input-group-text"],["type","number","formControlName","cost_procedure","placeholder","",1,"form-control","form-control-sm",3,"ngClass"],["type","date","formControlName","expiration_date","placeholder","",1,"form-control","form-control-sm",3,"ngClass"],["formControlName","idtype_document","required","",1,"form-select","form-select-sm",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","file","accept","application/pdf",1,"form-control","form-control-sm",3,"change"],["type","date","rows","2","formControlName","observations","placeholder","",1,"form-control","form-control-sm",3,"ngClass"],[1,"invalid-feedback"],[3,"value"],[2,"margin","5px"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fa-solid","fa-x"],["scope","col"],["scope","row"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"spacer","btn","btn-outline-info",3,"click"],[1,"fa-solid","fa-file-pdf"],["disabled","",1,"spacer","btn","btn-outline-dark"],[1,""],[1,"spacer","btn","btn-outline-warning",3,"click"],[1,"fa-solid","fa-file-pen"],[1,"spacer","btn","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash-can"],["mat-header-row",""],["mat-row",""]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"mat-toolbar",0)(1,"span"),e.\u0275\u0275text(2,"Documentos"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",1),e.\u0275\u0275elementStart(4,"button",2)(5,"mat-icon"),e.\u0275\u0275text(6,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"mat-dialog-content")(8,"div",3)(9,"div",4),e.\u0275\u0275template(10,se,41,28,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",6)(12,"button",7),e.\u0275\u0275listener("click",function(){return t.New(t.new)}),e.\u0275\u0275element(13,"i",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,ce,1,0,"samp",9),e.\u0275\u0275template(15,de,2,0,"button",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"table",11),e.\u0275\u0275elementContainerStart(17,12),e.\u0275\u0275template(18,pe,2,0,"th",13),e.\u0275\u0275template(19,ue,2,1,"td",14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(20,15),e.\u0275\u0275template(21,fe,2,0,"th",13),e.\u0275\u0275element(22,"th"),e.\u0275\u0275template(23,he,2,1,"td",14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(24,16),e.\u0275\u0275template(25,_e,2,0,"th",13),e.\u0275\u0275element(26,"th"),e.\u0275\u0275template(27,ge,4,2,"td",14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(28,17),e.\u0275\u0275template(29,be,2,0,"th",13),e.\u0275\u0275element(30,"th"),e.\u0275\u0275template(31,Ce,2,1,"td",14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(32,18),e.\u0275\u0275template(33,xe,2,0,"th",13),e.\u0275\u0275element(34,"th"),e.\u0275\u0275template(35,Ee,2,1,"td",14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(36,19),e.\u0275\u0275template(37,Se,2,0,"th",13),e.\u0275\u0275element(38,"th"),e.\u0275\u0275template(39,we,2,1,"td",14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(40,20),e.\u0275\u0275template(41,Te,2,0,"th",13),e.\u0275\u0275template(42,Ie,6,0,"td",14),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(43,De,1,0,"tr",21),e.\u0275\u0275template(44,ke,1,0,"tr",22),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("mat-dialog-close",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.new),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(8,Oe,!t.new,t.new)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.new),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.new),e.\u0275\u0275advance(1),e.\u0275\u0275property("dataSource",t.dataSource),e.\u0275\u0275advance(27),e.\u0275\u0275property("matHeaderRowDef",t.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",t.displayedColumns))},dependencies:[f.mk,f.sg,f.O5,F.Ye,N.RK,te.Hw,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.XQ,c.Gk,_.ZT,_.xY,I.oO,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.Q7,a.sg,a.u],styles:[".header[_ngcontent-%COMP%]{font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;font-size:xx-large;font-weight:700}.spacer[_ngcontent-%COMP%]{border:none}"]});var Fe=s(8493),Ne=s.t(Fe,2),r=s(7911),Ve=s(7121),Ae=s(9829);const Me=["scheduledOrdersPaginator"];function ze(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",52),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.save())}),e.\u0275\u0275element(1,"i",53),e.\u0275\u0275elementEnd()}if(2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!t.companyform.valid)}}function Le(o,n){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",54),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.createPDF())}),e.\u0275\u0275element(1,"i",55),e.\u0275\u0275elementEnd()}}function Re(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("ruc")," ")}}function je(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("name")," ")}}function Pe(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t.idtype_company),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.name)}}function Be(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("idtype_company")," ")}}function $e(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"option",57),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=n.$implicit;e.\u0275\u0275property("value",t.idlocation),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",t.location," ( ",t.province," )")}}function We(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("idlocation")," ")}}function qe(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("address")," ")}}function Ge(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("email"),"")}}function Je(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("cell")," ")}}function He(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("tel_atcn_client")," ")}}function Ye(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("phone")," ")}}function Qe(o,n){if(1&o&&(e.\u0275\u0275elementStart(0,"small",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.errorMessage("default_load_type")," ")}}const Ue=function(){return["/displaypanel"]},Ze=function(){return["/displaypanel/business"]},u=function(o){return{"is-invalid":o}};r.PdfMakeWrapper.setFonts(Ne);var S=(()=>{return(o=S||(S={})).EDIT="edit",o.NEW="new",S;var o})();class x{set paginator(n){n&&(this.dataSource.paginator=n)}constructor(n,t,i,l,m,d,D){this.companySvc=n,this.placeSvc=t,this.fb=i,this.router=l,this.toastr=m,this.dialog=d,this.authSvc=D,this.img="",this.actionTODO="",this.tdocument=[],this.message="",this.location=[],this.displayedColumns=["idcompany","name","type_company","logo","ruc","location","address","email","phone","tel_atcn_client","cell","default_load_type"],this.dataSource=new c.by,this.length=0,this.pageSize=10,this.pageSizeOptions=[],this.Bankaccount=[],this.m=[],this.isValidEmail=/\S+@\S+\.\S+/,this.typecompany=[],this.isedit=!1}ngOnInit(){this.actionTODO=S.NEW,this.CompanyForm(),this.list()}fromdisable(n){n?(this.companyform.controls.name.disable(),this.companyform.controls.logo.disable(),this.companyform.controls.ruc.disable(),this.companyform.controls.address.disable(),this.companyform.controls.email.disable(),this.companyform.controls.phone.disable(),this.companyform.controls.tel_atcn_client.disable(),this.companyform.controls.cell.disable(),this.companyform.controls.default_load_type.disable(),this.companyform.controls.idtype_company.disable(),this.companyform.controls.idlocation.disable()):(this.companyform.controls.name.enable(),this.companyform.controls.logo.enable(),this.companyform.controls.ruc.enable(),this.companyform.controls.address.enable(),this.companyform.controls.email.enable(),this.companyform.controls.phone.enable(),this.companyform.controls.tel_atcn_client.enable(),this.companyform.controls.cell.enable(),this.companyform.controls.default_load_type.enable(),this.companyform.controls.idtype_company.enable(),this.companyform.controls.idlocation.enable())}CompanyForm(){this.companyform=this.fb.group({name:[{value:"",disabled:!0},[a.kI.required,a.kI.minLength(4)]],logo:[{value:"",disabled:!0}],ruc:[{value:"",disabled:!0},[a.kI.required,a.kI.minLength(10)]],address:[{value:"",disabled:!0},[a.kI.required,a.kI.minLength(4)]],email:[{value:"",disabled:!0},[a.kI.required,a.kI.minLength(4),a.kI.pattern(this.isValidEmail)]],phone:[{value:"",disabled:!0},[a.kI.required,a.kI.minLength(8)]],tel_atcn_client:[{value:"",disabled:!0},[a.kI.required,a.kI.minLength(8)]],cell:[{value:"",disabled:!0},[a.kI.required,a.kI.minLength(8)]],default_load_type:[{value:"",disabled:!0},[a.kI.required]],idtype_company:[{value:"",disabled:!0},[a.kI.required]],idlocation:[{value:"",disabled:!0},[a.kI.required]]}),this.form=this.fb.group({profile:[""]})}list(){this.id=this.authSvc.userValue.idcompany,this.companySvc.GetIdCompany(this.authSvc.userValue.idcompany).subscribe(n=>{this.company=n,this.img=n.logo?A.N.API_URL+n.logo:"./../../../../../../assets/noimage.png",this.companyform.patchValue({name:n.name,logo:n.logo,ruc:n.ruc,address:n.address,email:n.email,phone:n.phone,tel_atcn_client:n.tel_atcn_client,cell:n.cell,default_load_type:n.default_load_type,idtype_company:n.idtype_company,idlocation:n.idlocation}),this.companyform.updateValueAndValidity()}),this.companySvc.GetTypeCompany().subscribe(n=>{this.typecompany=n},n=>console.error(n)),this.placeSvc.GetLocation().subscribe(n=>{this.location=n},n=>console.error(n))}edit(n){return this.fromdisable(this.isedit),this.isedit=!this.isedit,this.isedit}onOpenModal(){this.dialog.open(g,{height:"500px",width:"2500px",hasBackdrop:!0,disableClose:!0,data:{title:"Empresa",company:this.company}}).afterClosed().subscribe(t=>{})}onOpenModal2(){this.dialog.open(C,{height:"500px",width:"3000px",hasBackdrop:!0,disableClose:!0,data:{title:"Empresa",company:this.company}}).afterClosed().subscribe(t=>{})}onChange(n){if(n.target.files.length>0){const t=n.target.files[0];this.form.get("profile").setValue(t)}}save(){if(this.form.get("profile").value){const n=new FormData;n.append("name",this.companyform.value.name),n.append("logo",this.form.get("profile").value),n.append("ruc",this.companyform.value.ruc),n.append("address",this.companyform.value.address),n.append("email",this.companyform.value.email),n.append("phone",this.companyform.value.phone),n.append("tel_atcn_client",this.companyform.value.tel_atcn_client),n.append("cell",this.companyform.value.cell),n.append("default_load_type",this.companyform.value.default_load_type),n.append("idtype_company",this.companyform.value.idtype_company),n.append("idlocation",this.companyform.value.idlocation),this.companySvc.PutCompany(n,this.id).subscribe(i=>{this.m=i,this.toastr.warning(this.m.message,"Actulizado",{timeOut:3e3}),this.router.navigate(["/displaypanel/business"])},i=>console.error(i))}else this.companySvc.PutCompany(this.companyform.value,this.id).subscribe(t=>{this.m=t,this.toastr.warning(this.m.message,"Actulizado",{timeOut:3e3}),this.router.navigate(["/displaypanel/business"])},t=>console.error(t))}createPDF(){var n=this;return(0,O.Z)(function*(){const t=n.typecompany.filter(m=>m.idtype_company===n.companyform.value.idtype_company),i=n.location.filter(m=>m.idlocation===n.companyform.value.idlocation),l=new r.PdfMakeWrapper;n.companySvc.getCompanyAccount(n.id).subscribe(function(){var m=(0,O.Z)(function*(d){n.Bankaccount=d,l.add(new r.Columns([yield new r.Img(n.img).fit([80,80]).width(120).build(),[new r.Columns([new r.Txt("RUC").width(65).bold().fontSize(14).end,new r.Txt(n.companyform.value.ruc).fontSize(14).end]).end,new r.Columns([new r.Txt("Empresa:").width(65).bold().fontSize(14).end,new r.Txt(n.companyform.value.name).fontSize(14).end]).end,new r.Columns([new r.Txt("Tipo:").width(65).bold().fontSize(14).end,new r.Txt(t[0].name).fontSize(14).end]).end,new r.Columns([new r.Txt("Correo Electr\xf3nico:").width(130).bold().fontSize(14).end,new r.Txt(n.companyform.value.email).fontSize(14).end]).end]]).end),l.add(new r.Columns([new r.Txt("Tel\xe9fono Principal:").bold().fontSize(14).width(130).end,new r.Txt(n.companyform.value.phone).fontSize(14).end,new r.Txt("Tel\xe9fono:").bold().fontSize(14).width(130).end,new r.Txt(n.companyform.value.tel_atcn_client).fontSize(14).end]).end),l.add(new r.Columns([new r.Txt("Tel\xe9fono M\xf3vil:").bold().fontSize(14).width(130).end,new r.Txt(n.companyform.value.cell).fontSize(14).end]).end),l.add(new r.Columns([new r.Txt("Localidad:").bold().fontSize(14).width(130).end,new r.Txt(i[0].location).fontSize(14).end]).end),l.add(new r.Columns([new r.Txt("Direcci\xf3n:").bold().fontSize(14).width(130).end,new r.Txt(n.companyform.value.address).fontSize(14).end]).end),l.add(new r.Txt("Cuentas Bancarias").alignment("left").fontSize(16).bold().italics().margin(5).end),l.add(n.createTable(n.Bankaccount)),n.companySvc.GetDocumentCompany(n.id).subscribe(D=>{l.add(new r.Txt("Documentos").alignment("left").fontSize(16).bold().italics().margin(5).end),l.add(n.createTable1(D)),l.create().open()})});return function(d){return m.apply(this,arguments)}}(),m=>console.error(m))})()}createTable(n){return new r.Table([[new r.Txt("Nombre Del Banco").bold().end,new r.Txt("N\xb0 Cuenta").bold().end,new r.Txt("Por Defecto").bold().end],...this.extractData(n)]).widths(["*","auto",100]).layout("lightHorizontalLines").end}createTable1(n){return new r.Table([[new r.Txt("Documento").bold().end,new r.Txt("Costo").bold().end,new r.Txt("Fecha de Expedicio\xf3n").bold().end,new r.Txt("Fecha de Expiraci\xf3n").bold().end,new r.Txt("Obsevaciones").bold().end],...this.extractData1(n)]).widths(["*",100,"*","*",100]).layout("lightHorizontalLines").end}extractData(n){return n.map(t=>[t.bank_name,t.account_number,this.defauld(t.default)])}extractData1(n){return n.map(t=>[t.type_document,""+t.cost_procedure,t.issue_date,t.expiration_date,t.observations])}NombreDoc(n){let t="";return this.companySvc.GetTypeDocuments().subscribe(i=>(this.tdocument=i,this.tdocument=this.tdocument.filter(l=>l.iddocument_type===n),t=this.tdocument[0].name,console.log(t),this.tdocument[0].name),i=>(console.log(i),"")),""}defauld(n){return n?"si":"no"}isvalid(n){return this.companyform.get(n).invalid&&(this.companyform.get(n).dirty||this.companyform.get(n).touched)}errorMessage(n){const{errors:t}=this.companyform.get(n);let i=t?.minlength?.requiredLength;return t?{required:"El campo es requerido",pattern:"El correo Electronico no es Valido",minlength:`El valor ingresado es menor a ${i} carateres`}[Object.keys(t).find(Boolean)||""]:""}}x.\u0275fac=function(n){return new(n||x)(e.\u0275\u0275directiveInject(w.J),e.\u0275\u0275directiveInject(Ve.k),e.\u0275\u0275directiveInject(a.qu),e.\u0275\u0275directiveInject(E.F0),e.\u0275\u0275directiveInject(T._W),e.\u0275\u0275directiveInject(_.uw),e.\u0275\u0275directiveInject(Ae.e))},x.\u0275cmp=e.\u0275\u0275defineComponent({type:x,selectors:[["app-company"]],viewQuery:function(n,t){if(1&n&&e.\u0275\u0275viewQuery(Me,5),2&n){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(t.paginator=i.first)}},decls:118,vars:53,consts:[[1,"container-fluid","mb-3"],[1,"mt-4"],["aria-label","breadcrumb",1,"breadcrumb",2,"--bs-breadcrumb-divider","url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E\")"],[1,"breadcrumb-item"],[1,"text-info-emphasis",3,"routerLink"],[1,"fa-solid","fa-house"],[3,"routerLink"],[1,"breadcrumb-item","active"],[1,"form-group","d-flex","justify-content-between"],[1,"fw-bold"],["type","button",1,"btn","btn-warning","btn-sm","mg",3,"disabled","click"],[1,"fa-solid","fa-pen-to-square"],["class","btn btn-success btn-sm mg","type","button",3,"disabled","click",4,"ngIf"],["class","btn btn-secondary btn-sm mg","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm","mg",3,"disabled","click"],[1,"fa-solid","fa-xmark"],[1,"card","border-success","mb-3"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-2","text-center"],["width","120px","height","120px","srcset","",3,"src"],[1,"col-10"],[1,"form-group","row"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-10"],["type","text","maxlength","13","formControlName","ruc","placeholder","1000000000001",1,"form-control","form-control-sm",3,"ngClass"],["class","form-text text-danger",4,"ngIf"],["type","text","formControlName","name","placeholder","Nombre Empresa",1,"form-control","form-control-sm",3,"ngClass"],[1,"col"],["required","","formControlName","idtype_company",1,"form-select","form-select-sm",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","file","name","profile","required","",1,"form-control","form-control-sm",3,"disabled","change"],["required","","formControlName","idlocation",1,"form-select","form-select-sm",3,"ngClass"],["formControlName","address","placeholder","Nombre Empresa",1,"form-control","form-control-sm",3,"ngClass"],[1,"mt-1"],[1,"col-sm-4","col-form-label","fw-bold"],[1,"col-sm-8"],["type","email","formControlName","email","placeholder","example@exaple.com","required","",1,"form-control","form-control-sm",3,"ngClass"],[1,"col-sm-7","col-form-label","fw-bold"],[1,"col-sm-5"],["type","tel","formControlName","cell","placeholder","022366578","required","",1,"form-control","form-control-sm",3,"ngClass"],["type","tel","formControlName","tel_atcn_client","placeholder","0945726581","required","",1,"form-control","form-control-sm",3,"ngClass"],[1,"col-sm-3","col-form-label","fw-bold"],[1,"col-sm-9"],["type","tel","formControlName","phone","placeholder","0978542568","required","",1,"form-control","form-control-sm",3,"ngClass"],[1,"card"],["type","number","formControlName","default_load_type","placeholder","10","required","",1,"form-control","form-control-sm",3,"ngClass"],[1,"d-flex","flex-row-reverse"],[1,"p-2"],["type","button",1,"btn","btn-link",3,"click"],["type","button",1,"btn","btn-success","btn-sm","mg",3,"disabled","click"],[1,"fa-solid","fa-floppy-disk"],["type","button",1,"btn","btn-secondary","btn-sm","mg",3,"click"],[1,"fa-solid","fa-print"],[1,"form-text","text-danger"],[3,"value"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"div",1),e.\u0275\u0275elementStart(2,"ol",2)(3,"li",3)(4,"a",4),e.\u0275\u0275element(5,"i",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"li",3)(7,"a",6),e.\u0275\u0275text(8,"Empresa"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"li",7),e.\u0275\u0275text(10,"Ficha"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",8)(12,"h4",9),e.\u0275\u0275text(13,"Empresa"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div")(15,"button",10),e.\u0275\u0275listener("click",function(){return t.edit(t.isedit)}),e.\u0275\u0275element(16,"i",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,ze,2,1,"button",12),e.\u0275\u0275template(18,Le,2,0,"button",13),e.\u0275\u0275elementStart(19,"button",14),e.\u0275\u0275listener("click",function(){return t.edit(t.isedit)}),e.\u0275\u0275element(20,"i",15),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"div",16)(22,"div",17)(23,"form",18)(24,"div",19)(25,"div",20),e.\u0275\u0275element(26,"img",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",22)(28,"div",23)(29,"label",24),e.\u0275\u0275text(30,"RUC/CI:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",25),e.\u0275\u0275element(32,"input",26),e.\u0275\u0275template(33,Re,2,1,"small",27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",23)(35,"label",24),e.\u0275\u0275text(36,"Nombre:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"div",25),e.\u0275\u0275element(38,"input",28),e.\u0275\u0275template(39,je,2,1,"small",27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"div",19)(41,"div",29)(42,"div",23)(43,"label",24),e.\u0275\u0275text(44,"Tipo:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"div",25)(46,"select",30)(47,"option",31),e.\u0275\u0275text(48,"seleccione uno"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(49,Pe,2,2,"option",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(50,Be,2,1,"small",27),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(51,"div",29)(52,"div",23)(53,"label",24),e.\u0275\u0275text(54,"Logo:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"div",25)(56,"input",33),e.\u0275\u0275listener("change",function(l){return t.onChange(l)}),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(57,"div",19)(58,"div",29)(59,"div",23)(60,"label",24),e.\u0275\u0275text(61,"Localidad:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"div",25)(63,"select",34)(64,"option",31),e.\u0275\u0275text(65,"seleccione uno"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(66,$e,2,3,"option",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(67,We,2,1,"small",27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(68,"div",23)(69,"label",24),e.\u0275\u0275text(70,"Direcci\xf3n:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(71,"div",25),e.\u0275\u0275element(72,"textarea",35),e.\u0275\u0275template(73,qe,2,1,"small",27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(74,"div",36),e.\u0275\u0275elementStart(75,"div",23)(76,"label",37),e.\u0275\u0275text(77,"Correo Electr\xf3nico:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(78,"div",38),e.\u0275\u0275element(79,"input",39),e.\u0275\u0275template(80,Ge,2,1,"small",27),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(81,"div",29)(82,"div",19)(83,"div",29)(84,"div",23)(85,"label",40),e.\u0275\u0275text(86,"Tel\xe9fono Principal:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(87,"div",41),e.\u0275\u0275element(88,"input",42),e.\u0275\u0275template(89,Je,2,1,"small",27),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(90,"div",29)(91,"div",23)(92,"label",37),e.\u0275\u0275text(93,"Tel\xe9fono:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"div",38),e.\u0275\u0275element(95,"input",43),e.\u0275\u0275template(96,He,2,1,"small",27),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(97,"div",23)(98,"label",44),e.\u0275\u0275text(99,"Tel\xe9fono M\xf3vil"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"div",45),e.\u0275\u0275element(101,"input",46),e.\u0275\u0275template(102,Ye,2,1,"small",27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(103,"div",47)(104,"div",17)(105,"div",23)(106,"label",37),e.\u0275\u0275text(107,"Carga Predeterminada:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(108,"div",38),e.\u0275\u0275element(109,"input",48),e.\u0275\u0275template(110,Qe,2,1,"small",27),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(111,"div",49)(112,"div",50)(113,"button",51),e.\u0275\u0275listener("click",function(){return t.onOpenModal2()}),e.\u0275\u0275text(114,"Documentos"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(115,"div",50)(116,"button",51),e.\u0275\u0275listener("click",function(){return t.onOpenModal()}),e.\u0275\u0275text(117,"Cuentas Bancarias"),e.\u0275\u0275elementEnd()()()()()()),2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(31,Ue)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(32,Ze)),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",t.isedit),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isedit),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isedit),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!t.isedit),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.companyform),e.\u0275\u0275advance(3),e.\u0275\u0275property("src",t.img,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(33,u,t.isvalid("ruc"))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("ruc")||!1),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(35,u,t.isvalid("name"))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("name")||!1),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(37,u,t.isvalid("idtype_company"))),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.typecompany),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("idtype_company")||!1),e.\u0275\u0275advance(6),e.\u0275\u0275property("disabled",!t.isedit),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(39,u,t.isvalid("idlocation"))),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.location),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("idlocation")||!1),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(41,u,t.isvalid("address"))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("address")||!1),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(43,u,t.isvalid("email"))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("email")||!1),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(45,u,t.isvalid("cell"))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("cell")||!1),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(47,u,t.isvalid("tel_atcn_client"))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("tel_atcn_client")||!1),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(49,u,t.isvalid("phone"))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("phone")||!1),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(51,u,t.isvalid("default_load_type"))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isvalid("default_load_type")||!1))},dependencies:[f.mk,f.sg,f.O5,E.rH,I.oO,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u],styles:[".mg[_ngcontent-%COMP%]{margin-left:1px;margin-right:1px}"]});const Ke=[{path:"",component:x}];class v{}v.\u0275fac=function(n){return new(n||v)},v.\u0275mod=e.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=e.\u0275\u0275defineInjector({imports:[E.Bz.forChild(Ke),E.Bz]});class y{}y.\u0275fac=function(n){return new(n||y)},y.\u0275mod=e.\u0275\u0275defineNgModule({type:y}),y.\u0275inj=e.\u0275\u0275defineInjector({imports:[f.ez,v,M.q,a.UX]})}}]);