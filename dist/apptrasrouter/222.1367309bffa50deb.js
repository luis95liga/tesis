"use strict";(self.webpackChunkapptrasrouter=self.webpackChunkapptrasrouter||[]).push([[222],{4222:(B,g,i)=>{i.r(g),i.d(g,{OwnerModule:()=>p});var f=i(6895),h=i(9299),r=i(4006),l=i(671),e=i(4650),y=i(2965),C=i(3077),O=i(7185),w=i(7974),S=i(5829);const x=["scheduledOrdersPaginator"];function E(o,t){if(1&o&&(e.\u0275\u0275elementStart(0,"small",49),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.errorMessage("name")," ")}}function _(o,t){if(1&o&&(e.\u0275\u0275elementStart(0,"option",50),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=t.$implicit;e.\u0275\u0275property("value",n.idcompany),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.name,"")}}function T(o,t){if(1&o&&(e.\u0275\u0275elementStart(0,"small",51),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.errorMessage("idcompany")," ")}}function D(o,t){1&o&&(e.\u0275\u0275elementStart(0,"th",52),e.\u0275\u0275text(1,"Id"),e.\u0275\u0275elementEnd())}function I(o,t){if(1&o&&(e.\u0275\u0275elementStart(0,"td",53),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=t.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.idowner)}}function k(o,t){1&o&&(e.\u0275\u0275elementStart(0,"th",52),e.\u0275\u0275text(1,"Propietario"),e.\u0275\u0275elementEnd())}function M(o,t){if(1&o&&(e.\u0275\u0275elementStart(0,"td",53),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=t.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.name)}}function j(o,t){1&o&&(e.\u0275\u0275elementStart(0,"th",52),e.\u0275\u0275text(1,"Empresa"),e.\u0275\u0275elementEnd())}function F(o,t){if(1&o&&(e.\u0275\u0275elementStart(0,"td",53),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=t.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.company)}}function N(o,t){1&o&&(e.\u0275\u0275elementStart(0,"th",52),e.\u0275\u0275text(1,"Actiones"),e.\u0275\u0275elementEnd())}function z(o,t){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",53)(1,"div",54)(2,"button",55),e.\u0275\u0275listener("click",function(){const c=e.\u0275\u0275restoreView(n).$implicit,v=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(v.edit(c.idowner))}),e.\u0275\u0275element(3,"i",56),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",57),e.\u0275\u0275listener("click",function(){const c=e.\u0275\u0275restoreView(n).$implicit,v=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(v.delete(c.idowner))}),e.\u0275\u0275element(5,"i",58),e.\u0275\u0275elementEnd()()()}}function P(o,t){1&o&&e.\u0275\u0275element(0,"tr",59)}function R(o,t){1&o&&e.\u0275\u0275element(0,"tr",60)}const V=function(){return["/displaypanel"]},L=function(){return["/displaypanel/vehicle/"]},b=function(o,t){return{"is-invalid":o,"is-valid":t}};var s=(()=>{return(o=s||(s={})).EDIT="edit",o.NEW="new",s;var o})();class u{set paginator(t){t&&(this.dataSource.paginator=t)}constructor(t,n,a,m,c){this.catagueSvc=t,this.companySvc=n,this.fb=a,this.cdr=m,this.toastr=c,this.actionTODO="",this.isedit=0,this.mensaje="",this.options=[1],this.selectopcion=!1,this.selecvalue="",this.displayedColumns=["idowner","name","company","actions"],this.dataSource=new l.by,this.length=0,this.pageSize=10,this.pageSizeOptions=[],this.ed=!1,this.owners=[],this.owner=[],this.company=[]}ngOnInit(){this.actionTODO=s.NEW,this.list(),this.ownerForm(),this.selectopcion=!1,this.selecvalue=""}ownerForm(){this.ownerform=this.fb.group({name:[{value:"",disabled:!0},[r.kI.required,r.kI.minLength(8)]],idcompany:[{value:"",disabled:!0},[r.kI.required]]})}fromdisable(t){t?(this.ownerform.controls.name.enable(),this.ownerform.controls.idcompany.enable()):(this.ownerform.controls.name.disable(),this.ownerform.controls.idcompany.disable())}list(){this.ed=!1,this.catagueSvc.GetOwer().subscribe(t=>{this.dataSource.data=t,this.length=t.length,this.pageSizeOptions=[5,10,20,t.length]},t=>console.error(t)),this.companySvc.GetCompany().subscribe(t=>{this.company=t})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}save(){const t=this.ownerform.value;0==this.isedit?this.actionTODO===s.NEW&&this.catagueSvc.PostOwer(t).subscribe(n=>{this.m=n,this.toastr.success(this.m.message,"Creado",{timeOut:3e3}),this.list(),this.ownerform.reset(),this.isedit=0,this.ed=!1,this.fromdisable(this.ed)}):this.actionTODO===s.EDIT&&this.catagueSvc.PutOwer(t,this.isedit).subscribe(n=>{this.m=n,this.toastr.warning(this.m.message,"Actualizado",{timeOut:3e3}),this.list(),this.ownerform.reset(),this.isedit=0,this.actionTODO=s.NEW,this.ed=!1,this.fromdisable(this.ed)})}New(){this.ownerform.reset(),this.isedit=0,this.ed=!0,this.fromdisable(this.ed)}edit(t){this.ed=!0,this.fromdisable(this.ed),this.actionTODO=s.EDIT,this.catagueSvc.GetIdOwer(t).subscribe(n=>{this.ownerform.patchValue({name:n.name,idcompany:n.idcompany}),this.ownerform.updateValueAndValidity()},n=>console.error(n)),this.isedit=t,this.selectopcion=!0,this.selecvalue=this.owner.company}cancel(){this.ownerform.reset(),this.isedit=0,this.actionTODO=s.NEW,this.selectopcion=!1,this.selecvalue="",this.ed=!1,this.fromdisable(this.ed)}delete(t){window.confirm("Desea eliminar este propietario")&&this.catagueSvc.DeleteOwer(t).subscribe(n=>{this.toastr.error("Registro Eliminado","Eliminado",{timeOut:3e3}),this.list()})}isvalid(t){return this.ownerform.get(t).invalid&&(this.ownerform.get(t).dirty||this.ownerform.get(t).touched)}errorMessage(t){const{errors:n}=this.ownerform.get(t);let a=n?.minlength?.requiredLength;return n?{required:"el campo es requerido",minlength:`el valor ingesado es menor a ${a} carateres`}[Object.keys(n).find(Boolean)||""]:""}}u.\u0275fac=function(t){return new(t||u)(e.\u0275\u0275directiveInject(y.k),e.\u0275\u0275directiveInject(C.J),e.\u0275\u0275directiveInject(r.qu),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(O._W))},u.\u0275cmp=e.\u0275\u0275defineComponent({type:u,selectors:[["app-owner"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(x,5),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.paginator=a.first)}},decls:72,vars:24,consts:[[1,"container-fluid"],[1,"mt-4"],["aria-label","breadcrumb",1,"breadcrumb",2,"--bs-breadcrumb-divider","url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E\")"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"fa-solid","fa-house"],[1,"breadcrumb-item","active"],[1,"form-group","d-flex","justify-content-between"],[1,"fw-bold"],["type","button",1,"btn","btn-lg","btn-primary","btn-sm",3,"click"],[1,"fa-solid","fa-plus"],[1,"mt-1"],[1,"card"],[1,"card-body",3,"formGroup"],[1,"row"],[1,"col-sm-6"],[1,"form-group","row"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-10"],["type","text","placeholder","Nombre","formControlName","name",1,"form-control","form-control-sm",3,"ngClass"],["class","form-text text-danger","class","text-danger",4,"ngIf"],[1,"col-sm-5"],["formControlName","idcompany",1,"form-select","form-select-sm",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","form-text text-danger",4,"ngIf"],[1,"col-sm-1"],["type","button",1,"spacer","btn","btn-outline-success","btn-sm",3,"disabled","click"],[1,"fa-solid","fa-floppy-disk"],["type","button",1,"spacer","btn","btn-outline-danger","btn-sm",3,"disabled","click"],[1,"fa-solid","fa-trash"],[1,"card-body"],[1,"d-flex","justify-content-between"],[1,"mb-1","row","text-black"],[1,"spacer1"],[1,"col-sm-4","col-form-label","fw-bold"],[1,"col-sm-8"],["type","text","placeholder","Buscar",1,"form-control","form-control-sm",3,"keyup"],["mat-table","",1,"table","table-striped","table-hover",3,"dataSource"],["matColumnDef","idowner"],["scope","col",4,"matHeaderCellDef"],["scope","row",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","company"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["scheduledOrdersPaginator",""],[1,"text-danger"],[3,"value"],[1,"form-text","text-danger"],["scope","col"],["scope","row"],[1,""],[1,"spacer","btn","btn-outline-warning",3,"click"],[1,"fa-solid","fa-file-pen"],[1,"spacer","btn","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash-can"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"div",1),e.\u0275\u0275elementStart(2,"ol",2)(3,"li",3)(4,"a",4),e.\u0275\u0275element(5,"i",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"li",3)(7,"a",4),e.\u0275\u0275text(8,"Veh\xedculos"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"li",6),e.\u0275\u0275text(10,"Propietarios"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",7)(12,"h4",8),e.\u0275\u0275text(13,"Propietario"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",9),e.\u0275\u0275listener("click",function(){return n.New()}),e.\u0275\u0275element(15,"i",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(16,"div",11),e.\u0275\u0275elementStart(17,"div",12)(18,"form",13)(19,"div",14)(20,"div",15)(21,"div",16)(22,"label",17),e.\u0275\u0275text(23,"Nombre:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",18),e.\u0275\u0275element(25,"input",19),e.\u0275\u0275template(26,E,2,1,"small",20),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"div",21)(28,"div",16)(29,"label",17),e.\u0275\u0275text(30,"Empresa:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",18)(32,"select",22)(33,"option",23),e.\u0275\u0275text(34,"Selecione Uno..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(35,_,2,2,"option",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(36,T,2,1,"small",25),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",26)(38,"button",27),e.\u0275\u0275listener("click",function(){return n.save()}),e.\u0275\u0275element(39,"i",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"button",29),e.\u0275\u0275listener("click",function(){return n.cancel()}),e.\u0275\u0275element(41,"i",30),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(42,"div",11),e.\u0275\u0275elementStart(43,"div",12)(44,"div",31)(45,"div",32),e.\u0275\u0275element(46,"div",33)(47,"div",34),e.\u0275\u0275elementStart(48,"div",16)(49,"label",35),e.\u0275\u0275text(50,"Buscar:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"div",36)(52,"input",37),e.\u0275\u0275listener("keyup",function(m){return n.applyFilter(m)}),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(53,"table",38),e.\u0275\u0275elementContainerStart(54,39),e.\u0275\u0275template(55,D,2,0,"th",40),e.\u0275\u0275template(56,I,2,1,"td",41),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(57,42),e.\u0275\u0275template(58,k,2,0,"th",40),e.\u0275\u0275element(59,"th"),e.\u0275\u0275template(60,M,2,1,"td",41),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(61,43),e.\u0275\u0275template(62,j,2,0,"th",40),e.\u0275\u0275element(63,"th"),e.\u0275\u0275template(64,F,2,1,"td",41),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(65,44),e.\u0275\u0275template(66,N,2,0,"th",40),e.\u0275\u0275template(67,z,6,0,"td",41),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(68,P,1,0,"tr",45),e.\u0275\u0275template(69,R,1,0,"tr",46),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(70,"mat-paginator",47,48),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(16,V)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(17,L)),e.\u0275\u0275advance(11),e.\u0275\u0275property("formGroup",n.ownerform),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(18,b,n.isvalid("name"),n.ownerform.get("name").valid)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isvalid("name")||!1),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(21,b,n.isvalid("idcompany"),n.ownerform.get("idcompany").valid)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.company),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isvalid("idcompany")),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!n.ownerform.valid),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!n.ed),e.\u0275\u0275advance(13),e.\u0275\u0275property("dataSource",n.dataSource),e.\u0275\u0275advance(15),e.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",n.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("length",n.length)("pageSize",5)("pageSizeOptions",n.pageSizeOptions))},dependencies:[f.mk,f.sg,f.O5,h.rH,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.XQ,l.Gk,w.NW,S.oO],styles:[".spacer[_ngcontent-%COMP%]{border:none}.spacer2[_ngcontent-%COMP%]{margin:10px}.spacer1[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:40%}table[_ngcontent-%COMP%]{width:100%}.spacer1[_ngcontent-%COMP%]{flex:1 1 auto}"]});const W=[{path:"",component:u}];class d{}d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=e.\u0275\u0275defineNgModule({type:d}),d.\u0275inj=e.\u0275\u0275defineInjector({imports:[h.Bz.forChild(W),h.Bz]});var $=i(4738);class p{}p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=e.\u0275\u0275defineInjector({imports:[f.ez,d,r.UX,$.q,w.TU]})}}]);